[{"data":1,"prerenderedAt":555},["ShallowReactive",2],{"content-query-6vfLODdKKf":3},[4],{"_path":5,"_dir":6,"_draft":7,"_partial":7,"_locale":8,"title":9,"description":10,"body":11,"_type":549,"_id":550,"_source":551,"_file":552,"_stem":553,"_extension":554},"/tech-dev/2024/08/26/cdn-content-delivery-network","26",false,"","內容傳遞網路（CDN）的運作與應用場景探討 | Lucas's Blog","2024-08-26 介紹的CDN架構、功能以及應用場景​，以及實作範例。",{"type":12,"children":13,"toc":543},"root",[14,30,34,45,48,53,58,63,68,76,88,93,108,118,121,126,131,136,141,146,169,174,177,188,193,198,203,208,213,218,223,228,233,256,259,267,270,279,284,289,294,297,308,319,330,335,340,345,348,359,370,381,392,397,402,410,421,432,443,448,453,458,461,472,477,482,487,492,497,502,507,518,523,528,533,538],{"type":15,"tag":16,"props":17,"children":19},"element","h1",{"id":18},"內容傳遞網路cdn的運作與應用場景探討",[20],{"type":15,"tag":21,"props":22,"children":26},"span",{"className":23},[24,25],"text-xl","font-bold",[27],{"type":28,"value":29},"text","內容傳遞網路（CDN）的運作與應用場景探討",{"type":15,"tag":31,"props":32,"children":33},"br",{},[],{"type":15,"tag":35,"props":36,"children":38},"h2",{"id":37},"傳統網站架設",[39],{"type":15,"tag":21,"props":40,"children":43},{"className":41},[42,25],"text-lg",[44],{"type":28,"value":37},{"type":15,"tag":31,"props":46,"children":47},{},[],{"type":15,"tag":49,"props":50,"children":51},"p",{},[52],{"type":28,"value":37},{"type":15,"tag":49,"props":54,"children":55},{},[56],{"type":28,"value":57},"是把網站內容放到一台Server",{"type":15,"tag":49,"props":59,"children":60},{},[61],{"type":28,"value":62},"然後使用者在瀏覽器上點選網址後",{"type":15,"tag":49,"props":64,"children":65},{},[66],{"type":28,"value":67},"會連到DNS把網址轉換成該網站的IP位置",{"type":15,"tag":49,"props":69,"children":70},{},[71,73],{"type":28,"value":72},"然後再由瀏覽器直接連線到那台Server取得網站內容資料\n",{"type":15,"tag":31,"props":74,"children":75},{},[],{"type":15,"tag":49,"props":77,"children":78},{},[79,85],{"type":15,"tag":80,"props":81,"children":84},"img",{"alt":82,"src":83},"傳統網站運作流程","https://cdn.lucas-chen.website/2024/08/26/01.png",[],{"type":15,"tag":31,"props":86,"children":87},{},[],{"type":15,"tag":49,"props":89,"children":90},{},[91],{"type":28,"value":92},"那這個方式會有以下缺點",{"type":15,"tag":94,"props":95,"children":96},"ul",{},[97,103],{"type":15,"tag":98,"props":99,"children":100},"li",{},[101],{"type":28,"value":102},"離Server 越遠 速度會越慢 (特別是全球性網站)",{"type":15,"tag":98,"props":104,"children":105},{},[106],{"type":28,"value":107},"Server 穩定性比較差 (流量大，同時連線同一台Server，讓Server當機的機會變大)",{"type":15,"tag":35,"props":109,"children":111},{"id":110},"cdn介紹",[112],{"type":15,"tag":21,"props":113,"children":115},{"className":114},[42,25],[116],{"type":28,"value":117},"CDN介紹",{"type":15,"tag":31,"props":119,"children":120},{},[],{"type":15,"tag":49,"props":122,"children":123},{},[124],{"type":28,"value":125},"所以就衍生出了CDN",{"type":15,"tag":49,"props":127,"children":128},{},[129],{"type":28,"value":130},"CDN 全名 內容傳遞網路 – Content Delivery Network",{"type":15,"tag":49,"props":132,"children":133},{},[134],{"type":28,"value":135},"可以將網站內容 部署到不同位置的邊緣節點",{"type":15,"tag":49,"props":137,"children":138},{},[139],{"type":28,"value":140},"不同地區的用戶可以就近存取伺服器並取得內容",{"type":15,"tag":49,"props":142,"children":143},{},[144],{"type":28,"value":145},"會有以下優點",{"type":15,"tag":94,"props":147,"children":148},{},[149,154,159,164],{"type":15,"tag":98,"props":150,"children":151},{},[152],{"type":28,"value":153},"實現加快載入速度 (物理上的距離降低)",{"type":15,"tag":98,"props":155,"children":156},{},[157],{"type":28,"value":158},"降低主機負擔 (都存取最近的CDN server，原本的Server 負載降低)",{"type":15,"tag":98,"props":160,"children":161},{},[162],{"type":28,"value":163},"可靠性提升 (多台cdn server就可以降低當機導致網站無法使用的風險)",{"type":15,"tag":98,"props":165,"children":166},{},[167],{"type":28,"value":168},"提升用戶體驗 (連線速度提升，瀏覽網站速度變快，且不容易網站掛掉)",{"type":15,"tag":49,"props":170,"children":171},{},[172],{"type":28,"value":173},"CDN 運作流程圖：",{"type":15,"tag":31,"props":175,"children":176},{},[],{"type":15,"tag":49,"props":178,"children":179},{},[180,185],{"type":15,"tag":80,"props":181,"children":184},{"alt":182,"src":183},"CDN 網站運作流程","https://cdn.lucas-chen.website/2024/08/26/02.png",[],{"type":15,"tag":31,"props":186,"children":187},{},[],{"type":15,"tag":49,"props":189,"children":190},{},[191],{"type":28,"value":192},"將網站內容放到 主要存放資料的Server",{"type":15,"tag":49,"props":194,"children":195},{},[196],{"type":28,"value":197},"並設定完CDN後",{"type":15,"tag":49,"props":199,"children":200},{},[201],{"type":28,"value":202},"使用者連線到這個網站",{"type":15,"tag":49,"props":204,"children":205},{},[206],{"type":28,"value":207},"會先連到DNS",{"type":15,"tag":49,"props":209,"children":210},{},[211],{"type":28,"value":212},"DNS 再轉派發到 CDN DNS",{"type":15,"tag":49,"props":214,"children":215},{},[216],{"type":28,"value":217},"CDN DNS再根據使用者的位置不同",{"type":15,"tag":49,"props":219,"children":220},{},[221],{"type":28,"value":222},"回傳最靠近使用者的 CDN 邊緣伺服器 IP",{"type":15,"tag":49,"props":224,"children":225},{},[226],{"type":28,"value":227},"然後使用者在連線到最靠近使用者的 CDN 邊緣伺服器 取得網站資料",{"type":15,"tag":49,"props":229,"children":230},{},[231],{"type":28,"value":232},"CDN 簡易組成如下",{"type":15,"tag":94,"props":234,"children":235},{},[236,241,246,251],{"type":15,"tag":98,"props":237,"children":238},{},[239],{"type":28,"value":240},"主要存放資料的Server (Origin Server)",{"type":15,"tag":98,"props":242,"children":243},{},[244],{"type":28,"value":245},"DNS",{"type":15,"tag":98,"props":247,"children":248},{},[249],{"type":28,"value":250},"CDN DNS",{"type":15,"tag":98,"props":252,"children":253},{},[254],{"type":28,"value":255},"CDN 邊緣伺服器 (存放在不同國家地區的CDN Server)",{"type":15,"tag":31,"props":257,"children":258},{},[],{"type":15,"tag":49,"props":260,"children":261},{},[262],{"type":15,"tag":80,"props":263,"children":266},{"alt":264,"src":265},"CDN 組成","https://cdn.lucas-chen.website/2024/08/26/03.png",[],{"type":15,"tag":31,"props":268,"children":269},{},[],{"type":15,"tag":35,"props":271,"children":273},{"id":272},"實戰演練",[274],{"type":15,"tag":21,"props":275,"children":277},{"className":276},[42,25],[278],{"type":28,"value":272},{"type":15,"tag":49,"props":280,"children":281},{},[282],{"type":28,"value":283},"我先將測試網站放了一堆GIF 檔案比較大的圖片",{"type":15,"tag":49,"props":285,"children":286},{},[287],{"type":28,"value":288},"並且放到距離台灣很遠的地方",{"type":15,"tag":49,"props":290,"children":291},{},[292],{"type":28,"value":293},"然後看他第一次載入網站的速度",{"type":15,"tag":31,"props":295,"children":296},{},[],{"type":15,"tag":49,"props":298,"children":299},{},[300,305],{"type":15,"tag":80,"props":301,"children":304},{"alt":302,"src":303},"CDN 實戰演練1","https://cdn.lucas-chen.website/2024/08/26/04.png",[],{"type":15,"tag":31,"props":306,"children":307},{},[],{"type":15,"tag":49,"props":309,"children":310},{},[311,316],{"type":15,"tag":80,"props":312,"children":315},{"alt":313,"src":314},"CDN 實戰演練2","https://cdn.lucas-chen.website/2024/08/26/05.png",[],{"type":15,"tag":31,"props":317,"children":318},{},[],{"type":15,"tag":49,"props":320,"children":321},{},[322,327],{"type":15,"tag":80,"props":323,"children":326},{"alt":324,"src":325},"CDN 實戰演練3","https://cdn.lucas-chen.website/2024/08/26/06.png",[],{"type":15,"tag":31,"props":328,"children":329},{},[],{"type":15,"tag":49,"props":331,"children":332},{},[333],{"type":28,"value":334},"發現到載入圖片的速度將近3秒",{"type":15,"tag":49,"props":336,"children":337},{},[338],{"type":28,"value":339},"然後開始串上CDN",{"type":15,"tag":49,"props":341,"children":342},{},[343],{"type":28,"value":344},"我使用 Cloudflare 這個CDN服務商，他有免費方案讓我使用",{"type":15,"tag":31,"props":346,"children":347},{},[],{"type":15,"tag":49,"props":349,"children":350},{},[351,356],{"type":15,"tag":80,"props":352,"children":355},{"alt":353,"src":354},"CDN 實戰演練4","https://cdn.lucas-chen.website/2024/08/26/07.png",[],{"type":15,"tag":31,"props":357,"children":358},{},[],{"type":15,"tag":49,"props":360,"children":361},{},[362,367],{"type":15,"tag":80,"props":363,"children":366},{"alt":364,"src":365},"CDN 實戰演練5","https://cdn.lucas-chen.website/2024/08/26/08.png",[],{"type":15,"tag":31,"props":368,"children":369},{},[],{"type":15,"tag":49,"props":371,"children":372},{},[373,378],{"type":15,"tag":80,"props":374,"children":377},{"alt":375,"src":376},"CDN 實戰演練6","https://cdn.lucas-chen.website/2024/08/26/09.png",[],{"type":15,"tag":31,"props":379,"children":380},{},[],{"type":15,"tag":49,"props":382,"children":383},{},[384,389],{"type":15,"tag":80,"props":385,"children":388},{"alt":386,"src":387},"CDN 實戰演練7","https://cdn.lucas-chen.website/2024/08/26/10.png",[],{"type":15,"tag":31,"props":390,"children":391},{},[],{"type":15,"tag":49,"props":393,"children":394},{},[395],{"type":28,"value":396},"選完後，會有兩個 主要的 CDN DNS 需要設定在你的域名代理商",{"type":15,"tag":49,"props":398,"children":399},{},[400],{"type":28,"value":401},"我是在Gandi購買的網域",{"type":15,"tag":49,"props":403,"children":404},{},[405,407],{"type":28,"value":406},"所以我要去Gandi 設定網域 名稱伺服器\n",{"type":15,"tag":31,"props":408,"children":409},{},[],{"type":15,"tag":49,"props":411,"children":412},{},[413,418],{"type":15,"tag":80,"props":414,"children":417},{"alt":415,"src":416},"CDN 實戰演練8","https://cdn.lucas-chen.website/2024/08/26/11.png",[],{"type":15,"tag":31,"props":419,"children":420},{},[],{"type":15,"tag":49,"props":422,"children":423},{},[424,429],{"type":15,"tag":80,"props":425,"children":428},{"alt":426,"src":427},"CDN 實戰演練9","https://cdn.lucas-chen.website/2024/08/26/12.png",[],{"type":15,"tag":31,"props":430,"children":431},{},[],{"type":15,"tag":49,"props":433,"children":434},{},[435,440],{"type":15,"tag":80,"props":436,"children":439},{"alt":437,"src":438},"CDN 實戰演練10","https://cdn.lucas-chen.website/2024/08/26/13.png",[],{"type":15,"tag":31,"props":441,"children":442},{},[],{"type":15,"tag":49,"props":444,"children":445},{},[446],{"type":28,"value":447},"設定完後就是這樣",{"type":15,"tag":49,"props":449,"children":450},{},[451],{"type":28,"value":452},"掛載CDN 服務器後",{"type":15,"tag":49,"props":454,"children":455},{},[456],{"type":28,"value":457},"就可以看看有了CDN 速度會變多快",{"type":15,"tag":31,"props":459,"children":460},{},[],{"type":15,"tag":49,"props":462,"children":463},{},[464,469],{"type":15,"tag":80,"props":465,"children":468},{"alt":466,"src":467},"CDN 實戰演練11","https://cdn.lucas-chen.website/2024/08/26/14.png",[],{"type":15,"tag":31,"props":470,"children":471},{},[],{"type":15,"tag":49,"props":473,"children":474},{},[475],{"type":28,"value":476},"相較於沒掛載CDN 服務之前 每張圖需要快3秒",{"type":15,"tag":49,"props":478,"children":479},{},[480],{"type":28,"value":481},"掛載後，讀取網站 每張圖片不到 200毫秒",{"type":15,"tag":49,"props":483,"children":484},{},[485],{"type":28,"value":486},"速度上快很多",{"type":15,"tag":49,"props":488,"children":489},{},[490],{"type":28,"value":491},"那我要怎麼確認網站有串上CDN呢",{"type":15,"tag":49,"props":493,"children":494},{},[495],{"type":28,"value":496},"可以直接在網址後面加上 cdn-cgi/trace",{"type":15,"tag":49,"props":498,"children":499},{},[500],{"type":28,"value":501},"可以看到colo=KHH 代表者是連到高雄的cdn edge server",{"type":15,"tag":49,"props":503,"children":504},{},[505],{"type":28,"value":506},"台北 連高雄 速度上就真的可以加快很多呢！",{"type":15,"tag":49,"props":508,"children":509},{},[510,515],{"type":15,"tag":80,"props":511,"children":514},{"alt":512,"src":513},"CDN 實戰演練12","https://cdn.lucas-chen.website/2024/08/26/15.png",[],{"type":15,"tag":31,"props":516,"children":517},{},[],{"type":15,"tag":49,"props":519,"children":520},{},[521],{"type":28,"value":522},"不只網站可以用CDN 加快",{"type":15,"tag":49,"props":524,"children":525},{},[526],{"type":28,"value":527},"還有影片串流 跟  軟體安裝檔案  或是 遊戲的圖片影片加速",{"type":15,"tag":49,"props":529,"children":530},{},[531],{"type":28,"value":532},"都是使用CDN 來讓速度提升，使用者體驗變好的應用",{"type":15,"tag":49,"props":534,"children":535},{},[536],{"type":28,"value":537},"如果有什麼不足的部分，歡迎補充喔",{"type":15,"tag":49,"props":539,"children":540},{},[541],{"type":28,"value":542},"謝謝大家！",{"title":8,"searchDepth":544,"depth":544,"links":545},2,[546,547,548],{"id":37,"depth":544,"text":37},{"id":110,"depth":544,"text":117},{"id":272,"depth":544,"text":272},"markdown","content:tech-dev:2024:08:26:cdn-content-delivery-network.md","content","tech-dev/2024/08/26/cdn-content-delivery-network.md","tech-dev/2024/08/26/cdn-content-delivery-network","md",1724736571113]