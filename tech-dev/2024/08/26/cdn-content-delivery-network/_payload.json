[{"data":1,"prerenderedAt":554},["ShallowReactive",2],{"content-query-Ps0cK9QtZu":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"body":10,"_type":548,"_id":549,"_source":550,"_file":551,"_stem":552,"_extension":553},"/tech-dev/2024/08/26/cdn-content-delivery-network","26",false,"","內容傳遞網路（CDN）的運作與應用場景探討 | Lucas's Blog","2024-08-26 介紹的CDN架構、功能以及應用場景​，以及實作範例。",{"type":11,"children":12,"toc":542},"root",[13,29,33,44,47,52,57,62,67,75,87,92,107,117,120,125,130,135,140,145,168,173,176,187,192,197,202,207,212,217,222,227,232,255,258,266,269,278,283,288,293,296,307,318,329,334,339,344,347,358,369,380,391,396,401,409,420,431,442,447,452,457,460,471,476,481,486,491,496,501,506,517,522,527,532,537],{"type":14,"tag":15,"props":16,"children":18},"element","h1",{"id":17},"內容傳遞網路cdn的運作與應用場景探討",[19],{"type":14,"tag":20,"props":21,"children":25},"span",{"className":22},[23,24],"text-xl","font-bold",[26],{"type":27,"value":28},"text","內容傳遞網路（CDN）的運作與應用場景探討",{"type":14,"tag":30,"props":31,"children":32},"br",{},[],{"type":14,"tag":34,"props":35,"children":37},"h2",{"id":36},"傳統網站架設",[38],{"type":14,"tag":20,"props":39,"children":42},{"className":40},[41,24],"text-lg",[43],{"type":27,"value":36},{"type":14,"tag":30,"props":45,"children":46},{},[],{"type":14,"tag":48,"props":49,"children":50},"p",{},[51],{"type":27,"value":36},{"type":14,"tag":48,"props":53,"children":54},{},[55],{"type":27,"value":56},"是把網站內容放到一台Server",{"type":14,"tag":48,"props":58,"children":59},{},[60],{"type":27,"value":61},"然後使用者在瀏覽器上點選網址後",{"type":14,"tag":48,"props":63,"children":64},{},[65],{"type":27,"value":66},"會連到DNS把網址轉換成該網站的IP位置",{"type":14,"tag":48,"props":68,"children":69},{},[70,72],{"type":27,"value":71},"然後再由瀏覽器直接連線到那台Server取得網站內容資料\n",{"type":14,"tag":30,"props":73,"children":74},{},[],{"type":14,"tag":48,"props":76,"children":77},{},[78,84],{"type":14,"tag":79,"props":80,"children":83},"img",{"alt":81,"src":82},"傳統網站運作流程","https://cdn.lucas-chen.website/2024/08/26/01.png",[],{"type":14,"tag":30,"props":85,"children":86},{},[],{"type":14,"tag":48,"props":88,"children":89},{},[90],{"type":27,"value":91},"那這個方式會有以下缺點",{"type":14,"tag":93,"props":94,"children":95},"ul",{},[96,102],{"type":14,"tag":97,"props":98,"children":99},"li",{},[100],{"type":27,"value":101},"離Server 越遠 速度會越慢 (特別是全球性網站)",{"type":14,"tag":97,"props":103,"children":104},{},[105],{"type":27,"value":106},"Server 穩定性比較差 (流量大，同時連線同一台Server，讓Server當機的機會變大)",{"type":14,"tag":34,"props":108,"children":110},{"id":109},"cdn介紹",[111],{"type":14,"tag":20,"props":112,"children":114},{"className":113},[41,24],[115],{"type":27,"value":116},"CDN介紹",{"type":14,"tag":30,"props":118,"children":119},{},[],{"type":14,"tag":48,"props":121,"children":122},{},[123],{"type":27,"value":124},"所以就衍生出了CDN",{"type":14,"tag":48,"props":126,"children":127},{},[128],{"type":27,"value":129},"CDN 全名 內容傳遞網路 – Content Delivery Network",{"type":14,"tag":48,"props":131,"children":132},{},[133],{"type":27,"value":134},"可以將網站內容 部署到不同位置的邊緣節點",{"type":14,"tag":48,"props":136,"children":137},{},[138],{"type":27,"value":139},"不同地區的用戶可以就近存取伺服器並取得內容",{"type":14,"tag":48,"props":141,"children":142},{},[143],{"type":27,"value":144},"會有以下優點",{"type":14,"tag":93,"props":146,"children":147},{},[148,153,158,163],{"type":14,"tag":97,"props":149,"children":150},{},[151],{"type":27,"value":152},"實現加快載入速度 (物理上的距離降低)",{"type":14,"tag":97,"props":154,"children":155},{},[156],{"type":27,"value":157},"降低主機負擔 (都存取最近的CDN server，原本的Server 負載降低)",{"type":14,"tag":97,"props":159,"children":160},{},[161],{"type":27,"value":162},"可靠性提升 (多台cdn server就可以降低當機導致網站無法使用的風險)",{"type":14,"tag":97,"props":164,"children":165},{},[166],{"type":27,"value":167},"提升用戶體驗 (連線速度提升，瀏覽網站速度變快，且不容易網站掛掉)",{"type":14,"tag":48,"props":169,"children":170},{},[171],{"type":27,"value":172},"CDN 運作流程圖：",{"type":14,"tag":30,"props":174,"children":175},{},[],{"type":14,"tag":48,"props":177,"children":178},{},[179,184],{"type":14,"tag":79,"props":180,"children":183},{"alt":181,"src":182},"CDN 網站運作流程","https://cdn.lucas-chen.website/2024/08/26/02.png",[],{"type":14,"tag":30,"props":185,"children":186},{},[],{"type":14,"tag":48,"props":188,"children":189},{},[190],{"type":27,"value":191},"將網站內容放到 主要存放資料的Server",{"type":14,"tag":48,"props":193,"children":194},{},[195],{"type":27,"value":196},"並設定完CDN後",{"type":14,"tag":48,"props":198,"children":199},{},[200],{"type":27,"value":201},"使用者連線到這個網站",{"type":14,"tag":48,"props":203,"children":204},{},[205],{"type":27,"value":206},"會先連到DNS",{"type":14,"tag":48,"props":208,"children":209},{},[210],{"type":27,"value":211},"DNS 再轉派發到 CDN DNS",{"type":14,"tag":48,"props":213,"children":214},{},[215],{"type":27,"value":216},"CDN DNS再根據使用者的位置不同",{"type":14,"tag":48,"props":218,"children":219},{},[220],{"type":27,"value":221},"回傳最靠近使用者的 CDN 邊緣伺服器 IP",{"type":14,"tag":48,"props":223,"children":224},{},[225],{"type":27,"value":226},"然後使用者在連線到最靠近使用者的 CDN 邊緣伺服器 取得網站資料",{"type":14,"tag":48,"props":228,"children":229},{},[230],{"type":27,"value":231},"CDN 簡易組成如下",{"type":14,"tag":93,"props":233,"children":234},{},[235,240,245,250],{"type":14,"tag":97,"props":236,"children":237},{},[238],{"type":27,"value":239},"主要存放資料的Server (Origin Server)",{"type":14,"tag":97,"props":241,"children":242},{},[243],{"type":27,"value":244},"DNS",{"type":14,"tag":97,"props":246,"children":247},{},[248],{"type":27,"value":249},"CDN DNS",{"type":14,"tag":97,"props":251,"children":252},{},[253],{"type":27,"value":254},"CDN 邊緣伺服器 (存放在不同國家地區的CDN Server)",{"type":14,"tag":30,"props":256,"children":257},{},[],{"type":14,"tag":48,"props":259,"children":260},{},[261],{"type":14,"tag":79,"props":262,"children":265},{"alt":263,"src":264},"CDN 組成","https://cdn.lucas-chen.website/2024/08/26/03.png",[],{"type":14,"tag":30,"props":267,"children":268},{},[],{"type":14,"tag":34,"props":270,"children":272},{"id":271},"實戰演練",[273],{"type":14,"tag":20,"props":274,"children":276},{"className":275},[41,24],[277],{"type":27,"value":271},{"type":14,"tag":48,"props":279,"children":280},{},[281],{"type":27,"value":282},"我先將測試網站放了一堆GIF 檔案比較大的圖片",{"type":14,"tag":48,"props":284,"children":285},{},[286],{"type":27,"value":287},"並且放到距離台灣很遠的地方",{"type":14,"tag":48,"props":289,"children":290},{},[291],{"type":27,"value":292},"然後看他第一次載入網站的速度",{"type":14,"tag":30,"props":294,"children":295},{},[],{"type":14,"tag":48,"props":297,"children":298},{},[299,304],{"type":14,"tag":79,"props":300,"children":303},{"alt":301,"src":302},"CDN 實戰演練1","https://cdn.lucas-chen.website/2024/08/26/04.png",[],{"type":14,"tag":30,"props":305,"children":306},{},[],{"type":14,"tag":48,"props":308,"children":309},{},[310,315],{"type":14,"tag":79,"props":311,"children":314},{"alt":312,"src":313},"CDN 實戰演練2","https://cdn.lucas-chen.website/2024/08/26/05.png",[],{"type":14,"tag":30,"props":316,"children":317},{},[],{"type":14,"tag":48,"props":319,"children":320},{},[321,326],{"type":14,"tag":79,"props":322,"children":325},{"alt":323,"src":324},"CDN 實戰演練3","https://cdn.lucas-chen.website/2024/08/26/06.png",[],{"type":14,"tag":30,"props":327,"children":328},{},[],{"type":14,"tag":48,"props":330,"children":331},{},[332],{"type":27,"value":333},"發現到載入圖片的速度將近3秒",{"type":14,"tag":48,"props":335,"children":336},{},[337],{"type":27,"value":338},"然後開始串上CDN",{"type":14,"tag":48,"props":340,"children":341},{},[342],{"type":27,"value":343},"我使用 Cloudflare 這個CDN服務商，他有免費方案讓我使用",{"type":14,"tag":30,"props":345,"children":346},{},[],{"type":14,"tag":48,"props":348,"children":349},{},[350,355],{"type":14,"tag":79,"props":351,"children":354},{"alt":352,"src":353},"CDN 實戰演練4","https://cdn.lucas-chen.website/2024/08/26/07.png",[],{"type":14,"tag":30,"props":356,"children":357},{},[],{"type":14,"tag":48,"props":359,"children":360},{},[361,366],{"type":14,"tag":79,"props":362,"children":365},{"alt":363,"src":364},"CDN 實戰演練5","https://cdn.lucas-chen.website/2024/08/26/08.png",[],{"type":14,"tag":30,"props":367,"children":368},{},[],{"type":14,"tag":48,"props":370,"children":371},{},[372,377],{"type":14,"tag":79,"props":373,"children":376},{"alt":374,"src":375},"CDN 實戰演練6","https://cdn.lucas-chen.website/2024/08/26/09.png",[],{"type":14,"tag":30,"props":378,"children":379},{},[],{"type":14,"tag":48,"props":381,"children":382},{},[383,388],{"type":14,"tag":79,"props":384,"children":387},{"alt":385,"src":386},"CDN 實戰演練7","https://cdn.lucas-chen.website/2024/08/26/10.png",[],{"type":14,"tag":30,"props":389,"children":390},{},[],{"type":14,"tag":48,"props":392,"children":393},{},[394],{"type":27,"value":395},"選完後，會有兩個 主要的 CDN DNS 需要設定在你的域名代理商",{"type":14,"tag":48,"props":397,"children":398},{},[399],{"type":27,"value":400},"我是在Gandi購買的網域",{"type":14,"tag":48,"props":402,"children":403},{},[404,406],{"type":27,"value":405},"所以我要去Gandi 設定網域 名稱伺服器\n",{"type":14,"tag":30,"props":407,"children":408},{},[],{"type":14,"tag":48,"props":410,"children":411},{},[412,417],{"type":14,"tag":79,"props":413,"children":416},{"alt":414,"src":415},"CDN 實戰演練8","https://cdn.lucas-chen.website/2024/08/26/11.png",[],{"type":14,"tag":30,"props":418,"children":419},{},[],{"type":14,"tag":48,"props":421,"children":422},{},[423,428],{"type":14,"tag":79,"props":424,"children":427},{"alt":425,"src":426},"CDN 實戰演練9","https://cdn.lucas-chen.website/2024/08/26/12.png",[],{"type":14,"tag":30,"props":429,"children":430},{},[],{"type":14,"tag":48,"props":432,"children":433},{},[434,439],{"type":14,"tag":79,"props":435,"children":438},{"alt":436,"src":437},"CDN 實戰演練10","https://cdn.lucas-chen.website/2024/08/26/13.png",[],{"type":14,"tag":30,"props":440,"children":441},{},[],{"type":14,"tag":48,"props":443,"children":444},{},[445],{"type":27,"value":446},"設定完後就是這樣",{"type":14,"tag":48,"props":448,"children":449},{},[450],{"type":27,"value":451},"掛載CDN 服務器後",{"type":14,"tag":48,"props":453,"children":454},{},[455],{"type":27,"value":456},"就可以看看有了CDN 速度會變多快",{"type":14,"tag":30,"props":458,"children":459},{},[],{"type":14,"tag":48,"props":461,"children":462},{},[463,468],{"type":14,"tag":79,"props":464,"children":467},{"alt":465,"src":466},"CDN 實戰演練11","https://cdn.lucas-chen.website/2024/08/26/14.png",[],{"type":14,"tag":30,"props":469,"children":470},{},[],{"type":14,"tag":48,"props":472,"children":473},{},[474],{"type":27,"value":475},"相較於沒掛載CDN 服務之前 每張圖需要快3秒",{"type":14,"tag":48,"props":477,"children":478},{},[479],{"type":27,"value":480},"掛載後，讀取網站 每張圖片不到 200毫秒",{"type":14,"tag":48,"props":482,"children":483},{},[484],{"type":27,"value":485},"速度上快很多",{"type":14,"tag":48,"props":487,"children":488},{},[489],{"type":27,"value":490},"那我要怎麼確認網站有串上CDN呢",{"type":14,"tag":48,"props":492,"children":493},{},[494],{"type":27,"value":495},"可以直接在網址後面加上 cdn-cgi/trace",{"type":14,"tag":48,"props":497,"children":498},{},[499],{"type":27,"value":500},"可以看到colo=KHH 代表者是連到高雄的cdn edge server",{"type":14,"tag":48,"props":502,"children":503},{},[504],{"type":27,"value":505},"台北 連高雄 速度上就真的可以加快很多呢！",{"type":14,"tag":48,"props":507,"children":508},{},[509,514],{"type":14,"tag":79,"props":510,"children":513},{"alt":511,"src":512},"CDN 實戰演練12","https://cdn.lucas-chen.website/2024/08/26/15.png",[],{"type":14,"tag":30,"props":515,"children":516},{},[],{"type":14,"tag":48,"props":518,"children":519},{},[520],{"type":27,"value":521},"不只網站可以用CDN 加快",{"type":14,"tag":48,"props":523,"children":524},{},[525],{"type":27,"value":526},"還有影片串流 跟  軟體安裝檔案  或是 遊戲的圖片影片加速",{"type":14,"tag":48,"props":528,"children":529},{},[530],{"type":27,"value":531},"都是使用CDN 來讓速度提升，使用者體驗變好的應用",{"type":14,"tag":48,"props":533,"children":534},{},[535],{"type":27,"value":536},"如果有什麼不足的部分，歡迎補充喔",{"type":14,"tag":48,"props":538,"children":539},{},[540],{"type":27,"value":541},"謝謝大家！",{"title":7,"searchDepth":543,"depth":543,"links":544},2,[545,546,547],{"id":36,"depth":543,"text":36},{"id":109,"depth":543,"text":116},{"id":271,"depth":543,"text":271},"markdown","content:tech-dev:2024:08:26:cdn-content-delivery-network.md","content","tech-dev/2024/08/26/cdn-content-delivery-network.md","tech-dev/2024/08/26/cdn-content-delivery-network","md",1724736571219]